{% extends 'base.html' %}

{% block title %}ì˜¤ëŠ˜ì˜ ë§›ì§‘ - í™ˆ{% endblock %}

{% block content %}
<style>
    /* 1. íˆì–´ë¡œ ì„¹ì…˜ (ëœë¤ ì¶”ì²œ & í™˜ì˜ ë¬¸êµ¬) */
    .hero-section {
        text-align: center;
        padding: 60px 20px;
        background: linear-gradient(135deg, #03C75A 0%, #02b150 100%);
        border-radius: 20px;
        color: white;
        margin-bottom: 40px;
        box-shadow: 0 10px 20px rgba(3, 199, 90, 0.2);
    }
    .hero-title { font-size: 32px; font-weight: bold; margin-bottom: 10px; }
    .hero-subtitle { font-size: 18px; margin-bottom: 30px; opacity: 0.9; }
    
    .btn-roulette {
        background: white; color: #03C75A;
        border: none; padding: 15px 30px; border-radius: 50px;
        font-size: 20px; font-weight: bold; cursor: pointer;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        transition: transform 0.2s;
    }
    .btn-roulette:hover { transform: scale(1.05); }
    .roulette-result { margin-top: 20px; font-size: 24px; font-weight: bold; height: 30px; }

    /* 2. ê²€ìƒ‰ì°½ ì„¹ì…˜ */
    .search-container {
        max-width: 600px; margin: 0 auto 50px auto; text-align: center;
    }
    .search-input {
        width: 70%; padding: 15px; border: 2px solid #eee; border-radius: 50px 0 0 50px;
        font-size: 16px; outline: none; padding-left: 25px;
    }
    .search-btn {
        width: 20%; padding: 15px; background: #333; color: white;
        border: 2px solid #333; border-radius: 0 50px 50px 0;
        font-size: 16px; font-weight: bold; cursor: pointer;
    }

    /* 3. ìµœì‹  ë¦¬ë·° ì„¹ì…˜ */
    .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
    .section-title { font-size: 22px; font-weight: bold; border-left: 5px solid #333; padding-left: 15px; }
    
    .gallery-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); /* ë°˜ì‘í˜• ê·¸ë¦¬ë“œ */
        gap: 20px;
    }
    .gallery-card {
        background: white; border-radius: 15px; overflow: hidden;
        box-shadow: 0 4px 10px rgba(0,0,0,0.05); transition: 0.3s;
        text-decoration: none; color: inherit; display: block;
    }
    .gallery-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
    
    .card-img {
        width: 100%; height: 180px; object-fit: cover;
        background-color: #eee; /* ì´ë¯¸ì§€ ì—†ì„ ë•Œ ë°°ê²½ìƒ‰ */
    }
    .card-body { padding: 15px; }
    .card-title { font-weight: bold; font-size: 16px; margin-bottom: 5px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .card-info { font-size: 13px; color: #888; }
</style>

<div class="hero-section">
    <div class="hero-title">ì˜¤ëŠ˜ ë­ ë¨¹ì§€? ê³ ë¯¼ë  ë•!</div>
    <div class="hero-subtitle">ë§›ì§‘ ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ì§„ì§œ í›„ê¸°ë¥¼ ì°¾ì•„ë³´ì„¸ìš”.</div>
    
    <button class="btn-roulette" onclick="startRoulette()">ğŸ² ëœë¤ ë©”ë‰´ ì¶”ì²œë°›ê¸°</button>
    <div id="rouletteResult" class="roulette-result"></div>
</div>

<form action="{% url 'board_list' %}" method="get" class="search-container">
    <input type="text" name="q" class="search-input" placeholder="ì‹ë‹¹ ì´ë¦„ì´ë‚˜ ë©”ë‰´ë¥¼ ê²€ìƒ‰í•´ë³´ì„¸ìš”!">
    <button type="submit" class="search-btn">ê²€ìƒ‰</button>
</form>

<div class="section-header">
    <div class="section-title">ë”°ëˆë”°ëˆí•œ ìµœì‹  ë¦¬ë·° ğŸ”¥</div>
    <a href="{% url 'board_list' %}" style="color:#666; text-decoration:none;">ë”ë³´ê¸° &gt;</a>
</div>

<div class="gallery-grid">
    {% for post in recent_posts %}
    <a href="{% url 'board_detail' post.pk %}" class="gallery-card">
        {% if post.image %}
            <img src="{{ post.image.url }}" class="card-img">
        {% else %}
            <div class="card-img" style="display:flex; align-items:center; justify-content:center; color:#999;">
                ì´ë¯¸ì§€ ì—†ìŒ
            </div>
        {% endif %}
        
        <div class="card-body">
            <div class="card-title">{{ post.title }}</div>
            <div class="card-info">
                {{ post.res_name }}<br>
                â­ {{ post.author.real_name }}
            </div>
        </div>
    </a>
    {% empty %}
    <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #999;">
        ì•„ì§ ë“±ë¡ëœ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤. ì²« ê¸€ì„ ë‚¨ê²¨ì£¼ì„¸ìš”!
    </div>
    {% endfor %}
</div>

<script>
    function startRoulette() {
        const menus = ['ì‚¼ê²¹ì‚´', 'ì¹˜í‚¨', 'ë–¡ë³¶ì´', 'íŒŒìŠ¤íƒ€', 'êµ­ë°¥', 'ì´ˆë°¥', 'í–„ë²„ê±°', 'í”¼ì', 'ê¹€ì¹˜ì°Œê°œ', 'ì§œì¥ë©´', 'ìŒ€êµ­ìˆ˜', 'ë§ˆë¼íƒ•'];
        const resultDiv = document.getElementById('rouletteResult');
        let count = 0;
        
        // 0.1ì´ˆë§ˆë‹¤ ë©”ë‰´ ë°”ê¾¸ê¸° (ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼)
        const interval = setInterval(() => {
            const randomMenu = menus[Math.floor(Math.random() * menus.length)];
            resultDiv.innerText = `ì˜¤ëŠ˜ì˜ ì¶”ì²œ: ${randomMenu}`;
            count++;
            
            // 20ë²ˆ ë°”ë€Œë©´ ë©ˆì¶¤
            if (count > 20) {
                clearInterval(interval);
                resultDiv.style.color = "#ffff00"; // ê²°ê³¼ ê°•ì¡°ìƒ‰
            }
        }, 50);
    }
</script>

{% endblock %}